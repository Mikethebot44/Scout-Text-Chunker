# Repository Guidelines

## Project Structure & Module Organization
- `src/` holds TypeScript sources grouped by concern: `core/` defines shared interfaces, `chunkers/` implements strategies, `embedders/` wraps model providers, `utils/` offers token helpers, and `index.ts` curates public exports.
- `tests/` contains Vitest suites mirrored to features (e.g., `chunkers.test.ts`); keep new suites in this directory.
- `dist/` is generated by tsup; never edit or commit manual changes there. Build settings live in `tsconfig.json` and `tsup.config.ts`.

## Build, Test, and Development Commands
> **Note**: The agent cannot execute these commands, as it does not have network or shell access. Please run all commands manually on your local machine.

- `npm install` fetches dependencies; run after cloning or updating toolchains.
- `npm run build` invokes tsup to emit ESM, CJS, and type definitions into `dist/`.
- `npm test` executes Vitest; append `--watch` for local feedback or `--run` for CI-style execution.
- `npx tsup --watch` provides incremental builds while developing new chunkers or embedders.

## Coding Style & Naming Conventions
- Use TypeScript with 2-space indentation, semicolons, and ES module imports matching existing files.
- Classes remain PascalCase (`FixedChunker`), functions and instances camelCase, and constant identifiers UPPER_SNAKE only when immutable.
- Extend shared types (`Chunk`, `ChunkerOptions`) instead of redefining shapes; colocate helpers in `utils/` and re-export through `index.ts`.
- Document non-obvious behaviour with concise JSDoc and ensure `npm run build` passes before opening a PR.

## Testing Guidelines
- Write Vitest specs in `tests/`, following the `{feature}.test.ts` pattern; mirror directory structure when coverage expands.
- Cover boundary cases (empty inputs, overlap calculations, tokenizer configs) and mock UUIDs when assertions require stable identifiers.
- Keep `describe` blocks scoped to a chunker or embedder and phrase `it` statements with the observed behaviour (e.g., `it("respects chunk overlap")`).

## Commit & Pull Request Guidelines
- Follow Conventional Commits (`feat:`, `fix:`, `docs:`) as seen in `feat: implement chunkforge sdk`; keep commits focused and exclude build artifacts.
- PRs should state the problem, solution, and validation commands, link related issues, and include logs or screenshots when behaviour changes.
- Request review only after tests pass; flag any configuration or migration steps for adopters.

## Security & Configuration Tips
- Never commit API keys for embedders; load them through local environment variables or secrets managers.
- Validate new dependencies for license compatibility and document setup updates in `README.md`.
